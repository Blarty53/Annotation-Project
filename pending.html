<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pending Submissions</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <!-- Mobile hamburger -->
<div class="mobile-header">
    <span class="material-icons menu-icon" onclick="toggleSidebar()">menu</span>
    <span class="site-title">Annotation Project</span>
</div>

<!-- Sidebar -->
<nav id="sidebar">
    <div class="sidebar-header">
        <h2>Annotation Project</h2>
    </div>

    <ul class="nav-links">
        <li><a href="index.html"><span class="material-icons">home</span> Home</a></li>
        <li><a href="index.html#search"><span class="material-icons">search</span> Search</a></li>
        <li><a href="submission.html"><span class="material-icons">add_circle</span> Submit URL</a></li>
        <li><a href="pending.html"><span class="material-icons">schedule</span> Pending</a></li>
        <li><a href="annotations.html"><span class="material-icons">library_books</span> All Annotations</a></li>
        <li><a href="bookmarklet.html"><span class="material-icons">bookmark</span> Bookmarklet</a></li>
    </ul>

    <div class="theme-toggle">
        <label>Theme:</label>
        <select id="themeSelect" onchange="setTheme(this.value)">
            <option value="system">System</option>
            <option value="light">Light</option>
            <option value="dark">Dark</option>
        </select>
    </div>
</nav>

<!-- Overlay for mobile -->
<div id="overlay" onclick="toggleSidebar()"></div>

<!-- Page content wrapper -->
<div id="content">


<header>
    <h1>Pending Submissions</h1>
    <p>These are URLs submitted by the community that are awaiting verification.</p>
</header>

<div id="issues"></div>

<footer>
    <p>© 2026 Annotation Project</p>
</footer>

<script>
async function loadIssues() {
    const username = "Blarty53";
    const repo = "Annotation-Project";

    const res = await fetch(`https://api.github.com/repos/${username}/${repo}/issues?state=open`);
    const issues = await res.json();

    const container = document.getElementById('issues');
    container.innerHTML = '';

    issues.forEach(issue => {
        const labels = issue.labels.map(l => `<span class="label" style="background:#${l.color}; padding:4px 8px; border-radius:4px; color:#fff; margin-right:5px;">${l.name}</span>`).join('');

        const div = document.createElement('div');
        div.className = 'annotation';

        div.innerHTML = `
            <h3>${issue.title}</h3>
            <p>${issue.body.replace(/\n/g, '<br>')}</p>
            <p><strong>Labels:</strong> ${labels}</p>
            <p><a href="${issue.html_url}" target="_blank">View on GitHub →</a></p>
            <p><strong>Submitted:</strong> ${new Date(issue.created_at).toLocaleString()}</p>
        `;

        container.appendChild(div);
    });
}

loadIssues();
</script>

</div> <!-- end content wrapper -->
</body>
</html>
