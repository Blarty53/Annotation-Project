<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Annotation Generator</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
<!-- Mobile hamburger -->
<div class="mobile-header">
    <span class="material-icons menu-icon" onclick="toggleSidebar()">menu</span>
    <span class="site-title">Annotation Project</span>
</div>

<!-- Sidebar -->
<nav id="sidebar">
    <div class="sidebar-header">
        <h2>Annotation Project</h2>
    </div>

    <ul class="nav-links">
        <li><a href="index.html"><span class="material-icons">home</span> Home</a></li>
        <li><a href="index.html#search"><span class="material-icons">search</span> Search</a></li>
        <li><a href="submission.html"><span class="material-icons">add_circle</span> Submit URL</a></li>
        <li><a href="pending.html"><span class="material-icons">schedule</span> Pending</a></li>
        <li><a href="annotations.html"><span class="material-icons">library_books</span> All Annotations</a></li>
        <li><a href="bookmarklet.html"><span class="material-icons">bookmark</span> Bookmarklet</a></li>
    </ul>

    <div class="theme-toggle">
        <label>Theme:</label>
        <select id="themeSelect" onchange="setTheme(this.value)">
            <option value="system">System</option>
            <option value="light">Light</option>
            <option value="dark">Dark</option>
        </select>
    </div>
</nav>

<!-- Overlay for mobile -->
<div id="overlay" onclick="toggleSidebar()"></div>

<!-- Page content wrapper -->
<div id="content">


<header>
    <h1>Annotation Generator</h1>
    <p>Create JSON entries quickly and consistently.</p>
</header>

<h2>Input</h2>

<p><strong>Original URL:</strong></p>
<input id="url" style="width:100%; padding:10px;">

<p><strong>Archived URL:</strong></p>
<input id="archived" style="width:100%; padding:10px;">

<p><strong>Screenshot URL (optional):</strong></p>
<input id="screenshot" style="width:100%; padding:10px;">

<p><strong>Claim:</strong></p>
<textarea id="claim" style="width:100%; height:80px; padding:10px;"></textarea>

<p><strong>Verdict:</strong></p>
<select id="verdict" style="padding:10px;">
    <option>True</option>
    <option>Misleading</option>
    <option>Unsupported</option>
    <option>Outdated</option>
    <option>Unverifiable</option>
</select>

<p><strong>Why:</strong></p>
<textarea id="why" style="width:100%; height:120px; padding:10px;"></textarea>

<button onclick="generateJSON()" style="padding:10px 20px; margin-top:20px;">Generate JSON</button>

<h2>Output</h2>
<pre id="output" style="background:#f0f0f0; padding:20px; border-radius:6px;"></pre>

<footer>
    <p>Â© 2026 Annotation Project</p>
</footer>

<script>
function toggleSidebar() {
    document.getElementById("sidebar").classList.toggle("open");
    document.getElementById("overlay").classList.toggle("show");
}

function setTheme(mode) {
    localStorage.setItem("theme", mode);
    applyTheme();
}

function applyTheme() {
    const saved = localStorage.getItem("theme") || "system";
    document.getElementById("themeSelect").value = saved;

    if (saved === "light") {
        document.body.classList.remove("dark-theme");
    } else if (saved === "dark") {
        document.body.classList.add("dark-theme");
    } else {
        const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
        document.body.classList.toggle("dark-theme", prefersDark);
    }
}

applyTheme();
    
async function generateJSON() {
    const res = await fetch('annotations.json');
    const data = await res.json();

    const nextId = data.length > 0 ? Math.max(...data.map(a => a.id)) + 1 : 1;

    const entry = {
        id: nextId,
        claim: document.getElementById('claim').value,
        verdict: document.getElementById('verdict').value,
        why: document.getElementById('why').value,
        archived_link: document.getElementById('archived').value,
        original_link: document.getElementById('url').value,
        hypothesis_link: "",
        screenshot: document.getElementById('screenshot').value,
        timestamp: new Date().toISOString().split('T')[0]
    };

    document.getElementById('output').textContent = JSON.stringify(entry, null, 4);
}
</script>

    </div> <!-- end content wrapper -->

</body>
</html>
